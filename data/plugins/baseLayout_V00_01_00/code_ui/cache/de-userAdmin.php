<?php
function wgui_userAdmin($var_userAdmin) {
$retval="";
$retval .= wgui_userAdmin_main($var_userAdmin);
$retval .= wgui_userAdmin_userEditor($var_userAdmin);
$retval .= wgui_userAdmin_groupEditor($var_userAdmin);

return $retval;
}
function wgui_userAdmin_main($var_userAdmin) {
$retval="";
$retval .= "<div id=\"useradmTabs\"><ul><li><a href=\"#useradmFragmentUsers\"><span>Benutzer</span></a></li><li><a href=\"#useradmFragmentGroups\"><span>Gruppen</span></a></li></ul><div id=\"useradmFragmentUsers\"><table id=\"useradmTableUsers\"><thead><tr><th></th><th>Benutzername</th><th>Name</th><th>E-Mail</th><th>Sprache</th><th></th><th></th></tr></thead><tbody></tbody></table></div><div id=\"useradmFragmentGroups\"><table id=\"useradmTableGroups\"><thead><tr><th>Gruppe</th><th>Beschreibung</th><th>Status</th><th></th><th></th></tr></thead><tbody></tbody></table></div></div>\n";
return $retval;
}
function wgui_userAdmin_userEditor($var_userAdmin) {
if(is_array($var_userAdmin)) extract($var_userAdmin, EXTR_SKIP);
$retval="";
$retval .= "<div id=\"userEditorTabs\"><form id=\"userEditForm\" action=\"javascript:void(0);\" class=\"userEditForm\"><ul><li><a href=\"#UserEditorFragUser\"><span>Benutzerdaten</span></a></li><li><a href=\"#UserEditorFragGroups\"><span>Gruppen</span></a></li><li><a href=\"#UserEditorFragExt\"><span>Erweiterte Sicherheit</span></a></li></ul><div id=\"UserEditorFragUser\"><input type=\"hidden\" id=\"rec_id\" name=\"rec_id\" value=\"".$id."\"><input type=\"hidden\" id=\"ueListChange\" name=\"ueListChange\" value=\"0\"><br/><div><label for=\"uid\">Benutzername:</label><input type=\"text\" id=\"uid\" name=\"uid\" value=\"".$uid."\" onchange=\"document.getElementById('ueListChange').value='1';\"><br/></div><div><label for=\"full_name\">Nachname, Vorname:</label><input type=\"text\" id=\"full_name\" name=\"full_name\" value=\"".$full_name."\" onchange=\"document.getElementById('ueListChange').value='1';\"><br/></div><div><label for=\"email\">E-Mailadresse:</label><input type=\"text\" id=\"email\" name=\"email\" value=\"".$email."\" onchange=\"document.getElementById('ueListChange').value='1';\"><br/></div><div><label for=\"language\">Sprache:</label><select id=\"language\" name=\"language\" onchange=\"document.getElementById('ueListChange').value='1';\"><option value=\"de\"".$language_de.">deutsch</option></select><br/></div><div><label for=\"inactive\">Benutzerkonto sperren:</label><input type=\"checkbox\" id=\"inactive\" name=\"inactive\" value=\"1\"".$inactive."><br/></div><div><label for=\"timeout_minutes\">Autom. abmelden nach:</label><input type=\"text\" id=\"timeout_minutes\" name=\"timeout_minutes\" value=\"".$timeout_minutes."\"> Minuten<br/></div><div><label for=\"force_pwd_change\">Passwort bei der ersten Anmeldung ändern:</label><input type=\"checkbox\" id=\"force_pwd_change\" name=\"force_pwd_change\" value=\"1\"".$force_pwd_change."><br/></div><div><label for=\"pwd_change_period\">Passwort regelmässig ändern nach:</label><select id=\"pwd_change_period\" name=\"pwd_change_period\"><option value=\"0\"".$pwd_change_period_0.">---</option><option value=\"1\"".$pwd_change_period_1.">1 Woche</option><option value=\"2\"".$pwd_change_period_2.">2 Wochen</option><option value=\"4\"".$pwd_change_period_4.">4 Wochen</option><option value=\"6\"".$pwd_change_period_6.">6 Wochen</option><option value=\"8\"".$pwd_change_period_8.">8 Wochen</option><option value=\"12\"".$pwd_change_period_12.">12 Wochen</option></select><br/></div><div><label for=\"disallow_pwd_change\">Passwort-Änderung nicht zulassen:</label><input type=\"checkbox\" id=\"disallow_pwd_change\" name=\"disallow_pwd_change\" value=\"1\"".$disallow_pwd_change."><br/></div></div><div id=\"UserEditorFragGroups\"><div id=\"ueAvailableGroups\">Verfügbare Gruppen:</div><div id=\"ueSelectedGroups\">Zugewiesene Gruppen:</div><select class=\"csUserEditorGroups\" id=\"ueGrpSelect\" name=\"ueGrpSelect\" multiple=\"multiple\">\n";
if(isset($group_list)) foreach($group_list as $UserEditorGroups) {
$retval .= "<option value=\"".$UserEditorGroups["core_group_ID"]."\"\n";
if(isset($UserEditorGroups["selected"])) switch($UserEditorGroups["selected"]) {
case '1':
$retval .= "selected\n";
break;
}
$retval .= ">".$UserEditorGroups["group_name"]."</option>\n";
}
$retval .= "</select></div><div id=\"UserEditorFragExt\"><fieldset id=\"fieldsTimeRestriction\"><legend><input type=\"checkbox\" id=\"timeRestriction\" name=\"timeRestriction\" value=\"1\" onClick=\"toggleTimeRestrictionFields();\"".$timeRestriction."> Zugriff zeitlich beschränken</legend><div><label for=\"bMon\">Mo</label><br/><input type=\"checkbox\" id=\"bMon\" name=\"bMon\" value=\"1\"".$bMon."></div><div><label for=\"bTue\">Di</label><br/><input type=\"checkbox\" id=\"bTue\" name=\"bTue\" value=\"1\"".$bTue."></div><div><label for=\"bWed\">Mi</label><br/><input type=\"checkbox\" id=\"bWed\" name=\"bWed\" value=\"1\"".$bWed."></div><div><label for=\"bThu\">Do</label><br/><input type=\"checkbox\" id=\"bThu\" name=\"bThu\" value=\"1\"".$bThu."></div><div><label for=\"bFri\">Fr</label><br/><input type=\"checkbox\" id=\"bFri\" name=\"bFri\" value=\"1\"".$bFri."></div><div><label for=\"bSat\">Sa</label><br/><input type=\"checkbox\" id=\"bSat\" name=\"bSat\" value=\"1\"".$bSat."></div><div><label for=\"bSun\">So</label><br/><input type=\"checkbox\" id=\"bSun\" name=\"bSun\" value=\"1\"".$bSun."></div><p>jeweils von <input type=\"text\" id=\"timeFrom\" name=\"timeFrom\" value=\"".$timeFrom."\"> bis <input type=\"text\" id=\"timeUntil\" name=\"timeUntil\" value=\"".$timeUntil."\"></p></fieldset><fieldset id=\"fieldsIpRestriction\"><legend><input type=\"checkbox\" id=\"ipRestriction\" name=\"ipRestriction\" value=\"1\" onClick=\"toggleIpRestrictionFields();\"".$ipRestriction."> IP-Adressen einschränken</legend><label for=\"ipInclude1\">IP 1:</label> <input type=\"text\" id=\"ipInclude1\" name=\"ipInclude1\" value=\"".$ipInclude1."\"> <label for=\"subnetInclude1\">Subnet Maske:</label> <input type=\"text\" id=\"subnetInclude1\" name=\"subnetInclude1\" value=\"".$subnetInclude1."\"><br/><label for=\"ipInclude2\">IP 2:</label> <input type=\"text\" id=\"ipInclude2\" name=\"ipInclude2\" value=\"".$ipInclude2."\"> <label for=\"subnetInclude2\">Subnet Maske:</label> <input type=\"text\" id=\"subnetInclude2\" name=\"subnetInclude2\" value=\"".$subnetInclude2."\"><br/><label for=\"ipInclude3\">IP 3:</label> <input type=\"text\" id=\"ipInclude3\" name=\"ipInclude3\" value=\"".$ipInclude3."\"> <label for=\"subnetInclude3\">Subnet Maske:</label> <input type=\"text\" id=\"subnetInclude3\" name=\"subnetInclude3\" value=\"".$subnetInclude3."\"><br/><label for=\"ipInclude4\">IP 4:</label> <input type=\"text\" id=\"ipInclude4\" name=\"ipInclude4\" value=\"".$ipInclude4."\"> <label for=\"subnetInclude4\">Subnet Maske:</label> <input type=\"text\" id=\"subnetInclude4\" name=\"subnetInclude4\" value=\"".$subnetInclude4."\"><br/><label for=\"ipInclude5\">IP 5:</label> <input type=\"text\" id=\"ipInclude5\" name=\"ipInclude5\" value=\"".$ipInclude5."\"> <label for=\"subnetInclude5\">Subnet Maske:</label> <input type=\"text\" id=\"subnetInclude5\" name=\"subnetInclude5\" value=\"".$subnetInclude5."\"><br/></fieldset></div><div id=\"baseLayoutUaErr\"></div><button id=\"btnUserDataSubmit\" onclick=\"cb('baseLayout.saveUserEditorData',xajax.getFormValues('userEditForm',1));\">Speichern</button><button id=\"btnUserDataCancel\" onclick=\"$('#modalContainer').mb_close();\">Abbrechen</button></form></div>\n";
return $retval;
}
function wgui_userAdmin_groupEditor($var_userAdmin) {
if(is_array($var_userAdmin)) extract($var_userAdmin, EXTR_SKIP);
$retval="";
$retval .= "<div id=\"groupEditorTabs\"><form id=\"groupEditForm\" action=\"javascript:void(0);\" class=\"groupEditForm\"><ul><li><a href=\"#GroupEditorFragGroup\"><span>Gruppendaten</span></a></li><li><a href=\"#GroupEditorFragPermissions\"><span>Berechtigungen</span></a></li></ul><div id=\"GroupEditorFragGroup\"><input type=\"hidden\" id=\"rec_id\" name=\"rec_id\" value=\"".$id."\"><input type=\"hidden\" id=\"geListChange\" name=\"geListChange\" value=\"0\"><br/><div><label for=\"name\">Gruppenname:</label><input type=\"text\" id=\"name\" name=\"name\" value=\"".$name."\" onchange=\"document.getElementById('geListChange').value='1';\"><br/></div><div><label for=\"description\">Beschreibung:</label><input type=\"text\" id=\"description\" name=\"description\" value=\"".$description."\" onchange=\"document.getElementById('geListChange').value='1';\"><br/></div><div><label for=\"inactive\">Gruppe sperren:</label><input type=\"checkbox\" id=\"inactive\" name=\"inactive\" value=\"1\"".$inactive." onchange=\"document.getElementById('geListChange').value='1';\"><br/></div></div><div id=\"GroupEditorFragPermissions\"><div id=\"geAvailableModules\">Verfügbare Module:<select class=\"csGroupEditorModules\" id=\"geGrpSelect\" name=\"geGrpSelect\">".$moduleList."</select></div><div id=\"gePermissionContainer\"></div></div><div id=\"baseLayoutUaErr\"></div><button id=\"btnGroupDataSubmit\" onclick=\"cb('baseLayout.saveGroupEditorData',xajax.getFormValues('groupEditForm',1));\">Speichern</button><button id=\"btnGroupDataCancel\" onclick=\"$('#modalContainer').mb_close();\">Abbrechen</button></form></div>\n";
return $retval;
}

?>